## 481. 神奇字符串

### 题目传送门

[点击这里](https://leetcode.cn/problems/magical-string/)

### 解题思路

这道题用的方法是双指针，首先要理解题意的这个神奇字符串的意思，`s`的连续`1`和`2`进行分组，得到的新字符串正好是`s`本身，我们可以分析出，一定是`1`和`2`的交叉组合，不可能出现`22 22`这种情况，然后用双指针，从索引`2`和`3`开始，向后模拟构建即可。

### 代码

```go
func magicalString(n int) int {
    // 最短的神奇字符串是1，之后是122，所以n小于4，1的个数只有1
    if n < 4 {
        return 1
    }
    s := make([]byte, n)
    copy(s, "122")
    res := 1
    // 双指针，从该位置开始
    i, j := 2, 3
    for j < n {
        // 模拟构建规则，size是取目前最后一个字符，也就是接下来的长度，而num则取的是字符。
        size := s[i] - '0'
        // 由题意可以分析出1和2的串联字符一定是交叉进行的
        num := 3 - (s[j-1]-'0')
        // 向后模拟
        for size > 0 && j < n {
            // s[j]设置为nums，如果是1则添加，然后j移动，size个数减1.
            s[j] = '0' + num
            if num == 1 {
                res++
            }
            j++
            size--
        }
        i++
    }
    return res
}

```